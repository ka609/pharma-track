<div class="container mt-3">
  <h2>Nouvelle vente</h2>

  <!-- ✅ Alertes flottantes -->
  <div *ngIf="successMessage" 
       class="alert alert-success alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3"
       role="alert"
       style="z-index: 1050; min-width: 300px;">
    {{ successMessage }}
  </div>

  <div *ngIf="errorMessage" 
       class="alert alert-danger alert-dismissible fade show position-fixed top-0 start-50 translate-middle-x mt-3"
       role="alert"
       style="z-index: 1050; min-width: 300px;">
    {{ errorMessage }}
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="mb-3">
      <label>Médicament</label>
      <select class="form-select" formControlName="medicineId">
        <option value="">-- Choisir --</option>
        <option *ngFor="let med of medicines" [value]="med.id">
          {{ med.name }} (Stock: {{ med.stock }})
        </option>
      </select>
      <div *ngIf="form.get('medicineId')?.touched && form.get('medicineId')?.invalid" class="text-danger">
        Veuillez sélectionner un médicament
      </div>
    </div>

    <div class="mb-3">
      <label>Quantité</label>
      <input type="number" class="form-control" formControlName="quantity">
      <div *ngIf="form.get('quantity')?.touched && form.get('quantity')?.invalid" class="text-danger">
        Quantité invalide
      </div>
    </div>

    <button class="btn btn-primary" [disabled]="submitting">Enregistrer</button>
  </form>
</div>
